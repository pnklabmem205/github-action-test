# GitHub Actions를 활용한 개발 프로세스 개선 제안

## 일정 진행

**목요일, 금요일 진행 예정**

---

## 검증 완료: 기본 기능

### 확인해본 것
**한 브랜치로 코드를 Push하면 서버에 원하는 Docker 컨테이너가 자동으로 구동되는 것을 확인했습니다.**

- 코드 Push → GitHub Actions 자동 실행
- Docker 이미지 빌드 및 GHCR(GitHub Container Registry)에 푸시
- 서버에 SSH 접속하여 Docker 컨테이너 자동 구동
- **Push만 하면 배포 완료** (수동 작업 불필요)

이 기본 기능을 확장하여 **다중 개발자/AI Agent 병렬 작업 환경**을 구축하고자 합니다.

---

## 하고자 하는 것

### 목표
4명의 개발자(또는 AI Agent)가 각각 브랜치에서 병렬적으로 작업하고, 각자 테스트 서버에 자동으로 배포된 결과를 빠르게 확인할 수 있도록 하는 자동화 시스템 구축

**기본 기능 확장:**
- 기본: 1개 브랜치 Push → 1개 서버에 Docker 컨테이너 구동 ✅ (검증 완료)
- 확장: 4개 브랜치 Push → 각각 다른 포트에 Docker 컨테이너 구동 (독립적 테스트 환경)

### 구체적인 동작

**기본 기능 (검증 완료):**
- 브랜치에 코드 Push → 자동 빌드 → Docker 컨테이너 구동

**확장 기능 (제안):**
1. 개발자 4명(또는 AI Agent 4개)이 각각 `feature/dev1`, `feature/dev2`, `feature/dev3`, `feature/dev4` 브랜치에서 **병렬적으로** 작업
2. 각 브랜치에 코드를 Push하면 자동으로:
   - Docker 이미지 빌드 (기본 기능과 동일)
   - 각 개발자/AI Agent별 테스트 서버의 **다른 포트**에 배포
   - **포트 할당 방식:**
     - 초기 단계: 각 개발자당 1개 포트 (dev1→9001, dev2→9002, dev3→9003, dev4→9004)
     - 확장 단계: 각 개발자당 **100단위 포트 범위** 할당 고려
       - 예: dev1 → 9000-9099, dev2 → 9100-9199, dev3 → 9200-9299, dev4 → 9300-9399
       - 한 개발자가 여러 버전이나 기능을 동시에 테스트할 때 유연하게 사용 가능
   - 각각 독립적인 Docker 컨테이너로 구동
3. **각 개발자/AI Agent는 Push 후 즉시 자신의 테스트 URL로 작업물 확인 가능** (자동 배포로 빠른 피드백)
4. 4명이 각각 개발한 결과를 동시에 테스트하고 비교
5. 최종적으로 선택된 브랜치를 main에 PR 생성 → 머지 시 프로덕션 서버에 자동 배포 (기본 기능과 동일)

### 브랜치 병합 및 조율
- **선택적 병합:** dev1을 기본으로 하되, dev2의 특정 기능이나 코드를 선택적으로 포함 가능
- **Git 병합 기능 활용:** 
  - dev1 브랜치에 dev2 브랜치를 머지하여 두 브랜치의 내용을 통합
  - 충돌 발생 시 수동으로 해결하여 원하는 코드만 선택
- **Cherry-pick 활용:** dev2의 특정 커밋만 선택적으로 dev1에 적용
- **코드 리뷰를 통한 선택:** PR 생성 시 코드 리뷰를 통해 dev2의 일부 코드를 dev1에 수동으로 반영

### AI Agent 활용
- **병렬 작업:** AI Agent 4개가 각각 다른 브랜치에서 동시에 작업 가능
- **독립적 환경:** 각 AI Agent가 자신의 테스트 서버에서 결과 확인
- **빠른 반복:** AI Agent가 작업 → Push → 즉시 확인 → 개선 → 다시 Push 가능
- **동시 비교:** 4개 AI Agent가 만든 결과를 동시에 테스트하고 비교

---

## 왜 확장이 필요한가?

**기본 기능만으로는:**
- 여러 개발자가 동시에 작업할 때 서로 기다려야 함
- 같은 서버/포트를 사용하면 충돌 발생
- 각자의 작업물을 독립적으로 테스트하기 어려움
- 한 개발자가 여러 버전이나 기능을 동시에 테스트하기 어려움

**확장 기능으로 해결:**
- 각 개발자별로 독립적인 테스트 환경 제공
- 병렬 작업 가능 (서로 영향 없음)
- 빠른 피드백 및 비교 가능
- 확장 단계: 각 개발자당 100단위 포트 범위 할당으로 한 개발자가 여러 버전을 동시에 테스트 가능
  - 예: dev1이 버전 A(9001), 버전 B(9002), 버전 C(9003)를 동시에 테스트

---

## 해결하고자 하는 문제

### 현재 문제점

1. **수동 배포의 번거로움**
   - 코드 수정 후 서버에 접속해서 수동으로 배포해야 함
   - 배포에만 30분 정도 소요
   - 개발 집중도 저하

2. **여러 개발자/AI Agent가 동시에 작업할 때의 어려움**
   - 각자 작업한 결과를 테스트하려면 서로 기다려야 함
   - 같은 서버/포트를 사용하면 충돌 발생
   - 독립적인 테스트 환경이 없음
   - AI Agent가 병렬로 작업해도 순차적으로 배포해야 하는 제약

3. **배포 실수 가능성**
   - 수동 작업으로 인한 실수 (잘못된 버전 배포 등)
   - 배포 이력 추적 어려움

4. **작업물 확인의 지연**
   - 개발한 코드를 테스트하려면 수동 배포 필요
   - 배포하는 동안 기다려야 해서 빠른 피드백 어려움
   - 여러 개발자가 연속적으로 개발한 결과를 빠르게 확인하기 어려움

5. **브랜치 병합 시 조율의 어려움**
   - 여러 브랜치의 좋은 부분을 선택적으로 합치기 어려움
   - 예: dev1을 기본으로 하되 dev2의 일부 기능도 포함하고 싶을 때
   - 수동으로 코드를 복사/붙여넣기해야 하는 번거로움
   - 병합 충돌 해결이 복잡하고 시간 소모적

---

## 해결 방법

### GitHub Actions 자동화

**기본 기능 (이미 검증됨):**
- 코드 Push → 자동 빌드 → Docker 컨테이너 구동 ✅

**확장 기능:**
- 코드 Push만 하면 자동으로 빌드하고 배포되어 **즉시 작업물 확인 가능**
- 각 개발자/AI Agent별로 독립적인 테스트 환경 제공 (포트 분리)
- 4명(또는 AI Agent 4개)이 병렬적으로 개발한 결과를 빠르게 확인하고 비교 가능
- PR 머지 시에만 프로덕션 배포

**동작 방식:**

**기본 동작 (검증 완료):**
- 브랜치 Push → Docker 이미지 빌드 → 서버에 컨테이너 구동 ✅

**확장 동작:**
- 각 브랜치 Push → 해당 개발자/AI Agent의 테스트 서버/포트에 자동 배포 → **즉시 테스트 URL로 확인 가능**
- 브랜치 이름에 따라 자동으로 다른 포트에 배포
  - 초기: dev1→9001, dev2→9002, dev3→9003, dev4→9004
  - 확장: 각 개발자당 100단위 포트 범위 할당 (예: dev1→9000-9099, dev2→9100-9199 등)
- 한 개발자가 여러 버전을 동시에 테스트할 때 포트 범위 내에서 유연하게 사용 가능
- 4명이 각각 개발한 결과를 동시에 테스트하고 비교
- AI Agent의 경우: 병렬 작업 → 각자 Push → 각자 테스트 환경에서 확인 → 빠른 반복 가능
- PR 생성 → 빌드/테스트만 실행 (배포 안 함)
- **브랜치 병합 및 조율:**
  - dev1을 기본으로 선택했지만 dev2의 일부 기능도 필요할 때
  - dev1 브랜치에 dev2 브랜치를 머지하여 통합 가능
  - 충돌 발생 시 코드 리뷰를 통해 원하는 코드만 선택적으로 반영
  - 또는 Cherry-pick으로 dev2의 특정 커밋만 선택적으로 적용
- PR 머지 → 프로덕션 서버에 자동 배포 (기본 기능과 동일)

**결과:**

**기본 기능의 효과 (검증 완료):**
- 배포 시간: 30분 → 5분 (자동화) ✅
- 배포 실수: 1% (자동화로 최대한 방지) ✅
- Push만 하면 Docker 컨테이너 자동 구동 ✅

**확장 기능의 추가 효과:**
- 작업물 확인: Push 후 즉시 가능 (빠른 피드백)
- 독립적인 테스트 환경: 각 개발자/AI Agent별로 제공 (포트 분리)
- 유연한 포트 할당: 확장 단계에서 각 개발자당 100단위 포트 범위 할당으로 여러 버전 동시 테스트 가능
- 병렬 개발: 4명(또는 AI Agent 4개)이 동시에 작업하고 각자 결과를 빠르게 확인 가능
- AI Agent 활용: 여러 AI Agent가 병렬로 작업해도 서로 영향 없이 독립적으로 테스트 가능
- 브랜치 병합 조율: 여러 브랜치의 좋은 부분을 선택적으로 통합 가능 (예: dev1 기본 + dev2 일부 기능)

---

## 필요한 것

### 인프라
- 기존 서버 활용 (추가 서버 불필요)
- Docker 설치 (10분 소요)
- 포트 개방:
  - 초기 단계: 포트 4개 개방 (9001, 9002, 9003, 9004)
  - 확장 단계: 각 개발자당 100단위 포트 범위 할당 고려
    - 예: dev1 → 9000-9099 (100개 포트), dev2 → 9100-9199, dev3 → 9200-9299, dev4 → 9300-9399
    - 한 개발자가 여러 버전이나 기능을 동시에 테스트할 때 유연하게 사용 가능

### 설정
- GitHub Secrets 설정 (서버 정보 등)
- 워크플로우 파일 배포

### 비용
- GitHub Actions: 무료 제공량 사용
- 서버: 기존 서버 활용 시 추가 비용 없음

---

## 기대 효과

### 배포 시간 절감

### 품질 향상
- 자동 빌드/테스트로 버그 조기 발견
- 수동 실수 방지

### 효율성 향상
- 각 개발자/AI Agent가 독립적으로 작업 가능
- Push 후 즉시 작업물 확인 가능 (빠른 피드백)
- 4명(또는 AI Agent 4개)이 병렬적으로 개발한 결과를 빠르게 확인하고 비교 가능
- AI Agent 활용 시: 여러 AI Agent가 동시에 작업하고 각자 결과를 독립적으로 테스트 가능
- 브랜치 병합 조율: 여러 브랜치의 장점을 선택적으로 통합 가능 (예: dev1 기본 + dev2의 특정 기능)

---

## 결론

**하고자 하는 것:**
- **기본 기능 (검증 완료):** 브랜치에 Push만 하면 서버에 원하는 Docker 컨테이너가 자동으로 구동됨 ✅
- **확장 기능 (제안):** 개발자(또는 AI Agent)가 Push만 하면 자동으로 각자 테스트 환경에 배포되어 즉시 작업물을 확인할 수 있고, 4명(또는 AI Agent 4개)이 병렬적으로 개발한 결과를 빠르게 비교할 수 있는 자동화 시스템

**해결하는 문제:**
- 수동 배포의 번거로움, 여러 개발자/AI Agent 동시 작업의 어려움, 배포 실수, 작업물 확인의 지연, AI Agent 병렬 작업 시 순차 배포 제약, 브랜치 병합 시 조율의 어려움

**결과:**
- **기본 기능:** Push만 하면 Docker 컨테이너 자동 구동 (검증 완료) ✅
- **확장 기능:** Push 후 즉시 작업물 확인 가능 (빠른 피드백), 시간 절감, 품질 향상, 효율성 향상, AI Agent 병렬 작업 지원, 브랜치 병합 조율 가능 (여러 브랜치의 장점 선택적 통합), 추가 비용 없음
