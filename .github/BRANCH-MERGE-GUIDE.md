# 브랜치 병합 및 조율 가이드

## 상황: dev1을 기본으로 하되 dev2의 일부도 포함하고 싶을 때

### 시나리오
- dev1 브랜치를 main으로 선택했지만
- dev2의 특정 기능이나 코드도 함께 포함하고 싶음
- 두 브랜치의 장점을 선택적으로 통합하고 싶음

---

## 해결 방법

### 방법 1: Git Merge를 통한 브랜치 통합

**절차:**
1. dev1 브랜치로 이동
2. dev2 브랜치를 dev1에 머지
3. 충돌 발생 시 수동으로 해결하여 원하는 코드 선택

```bash
# dev1 브랜치로 이동
git checkout feature/dev1

# dev2 브랜치를 dev1에 머지
git merge feature/dev2

# 충돌 발생 시
# - 충돌 파일을 열어서 원하는 코드 선택
# - dev1의 코드를 기본으로 하되, dev2의 특정 부분만 가져오기
git add .
git commit -m "merge: dev2의 특정 기능을 dev1에 통합"
```

**장점:**
- 두 브랜치의 모든 변경사항을 한 번에 통합
- Git 히스토리 유지

**단점:**
- 충돌이 많을 경우 수동 해결 시간 소요

---

### 방법 2: Cherry-pick을 통한 선택적 적용

**절차:**
1. dev2 브랜치에서 원하는 커밋 확인
2. dev1 브랜치에 해당 커밋만 선택적으로 적용

```bash
# dev2 브랜치의 커밋 히스토리 확인
git log feature/dev2 --oneline

# dev1 브랜치로 이동
git checkout feature/dev1

# dev2의 특정 커밋만 선택적으로 적용
git cherry-pick <커밋해시>

# 여러 커밋을 선택적으로 적용
git cherry-pick <커밋1> <커밋2> <커밋3>
```

**장점:**
- 필요한 커밋만 선택적으로 적용 가능
- 불필요한 변경사항 제외 가능

**단점:**
- 커밋 단위로만 선택 가능 (파일 단위 선택 어려움)

---

### 방법 3: 코드 리뷰를 통한 수동 통합

**절차:**
1. dev1 브랜치를 main에 PR 생성
2. dev2 브랜치의 코드를 확인
3. PR에서 dev2의 좋은 부분을 수동으로 dev1에 반영
4. 수정 후 커밋 및 Push

```bash
# dev1 브랜치에서 작업
git checkout feature/dev1

# dev2의 특정 파일이나 코드를 확인하고 수동으로 가져오기
# 예: dev2의 utils.js 파일의 특정 함수만 가져오기
# 파일을 열어서 필요한 부분만 복사하여 dev1에 추가

git add .
git commit -m "feat: dev2의 특정 기능을 dev1에 통합"
git push origin feature/dev1
```

**장점:**
- 가장 세밀한 제어 가능
- 파일/함수 단위로 선택 가능

**단점:**
- 수동 작업 필요
- 시간 소요

---

### 방법 4: 통합 브랜치 생성

**절차:**
1. 새로운 통합 브랜치 생성
2. dev1을 기본으로 머지
3. dev2의 필요한 부분만 선택적으로 적용

```bash
# 통합 브랜치 생성
git checkout -b feature/integration

# dev1을 기본으로 머지
git merge feature/dev1

# dev2의 특정 커밋만 선택적으로 적용
git cherry-pick <dev2의 원하는 커밋>

# 또는 dev2를 머지하고 충돌 해결 시 원하는 코드만 선택
git merge feature/dev2
# 충돌 해결...

# 통합 브랜치를 main에 PR 생성
git push origin feature/integration
```

**장점:**
- 원본 브랜치(dev1, dev2) 보존
- 여러 번 시도 가능

**단점:**
- 추가 브랜치 생성 필요

---

## 실제 사용 예시

### 예시: dev1 기본 + dev2의 API 개선 기능 포함

```bash
# 1. dev1 브랜치로 이동
git checkout feature/dev1

# 2. dev2 브랜치 확인 (어떤 기능이 있는지)
git log feature/dev2 --oneline
# 예: "feat: API 응답 속도 개선" 커밋 발견

# 3. dev2의 특정 커밋만 dev1에 적용
git cherry-pick <API개선커밋해시>

# 4. 충돌 발생 시 해결
# - dev1의 기존 API 코드를 기본으로 유지
# - dev2의 성능 개선 부분만 선택적으로 적용

# 5. 테스트
# - dev1 브랜치에 Push하여 자동 배포 확인
# - 통합된 기능이 정상 작동하는지 테스트

# 6. main에 PR 생성
git push origin feature/dev1
# → GitHub에서 PR 생성
```

---

## GitHub에서 병합 조율

### PR 생성 시

1. **dev1을 main에 PR 생성**
2. **PR 화면에서:**
   - dev2 브랜치의 코드를 참고
   - 필요한 부분을 PR에 댓글로 제안
   - 또는 직접 코드 수정하여 반영

3. **코드 리뷰를 통한 통합:**
   - 리뷰어가 dev2의 좋은 부분을 지적
   - 개발자가 dev1 PR에 해당 코드 반영
   - 수정 후 커밋

---

## 충돌 해결 팁

### 충돌 발생 시

1. **충돌 파일 확인:**
   ```bash
   git status
   # 충돌 파일 목록 확인
   ```

2. **충돌 해결:**
   - 파일을 열어서 `<<<<<<<`, `=======`, `>>>>>>>` 표시 확인
   - dev1의 코드를 기본으로 유지
   - dev2의 필요한 부분만 선택적으로 가져오기

3. **충돌 해결 후:**
   ```bash
   git add .
   git commit -m "merge: dev2의 특정 기능 통합"
   ```

---

## 권장 워크플로우

### 상황별 추천 방법

| 상황 | 추천 방법 |
|------|-----------|
| dev2의 특정 커밋만 필요 | Cherry-pick |
| dev2의 대부분을 포함하되 일부만 제외 | Merge + 충돌 해결 |
| dev2의 특정 파일/함수만 필요 | 코드 리뷰 + 수동 통합 |
| 여러 브랜치를 복합적으로 통합 | 통합 브랜치 생성 |

---

## 주의사항

1. **원본 브랜치 보존:**
   - 통합 전에 원본 브랜치(dev1, dev2)는 그대로 유지
   - 통합 브랜치를 새로 만들어서 작업하는 것을 권장

2. **테스트 필수:**
   - 통합 후 반드시 테스트 환경에서 확인
   - 자동 배포를 통해 즉시 확인 가능

3. **커밋 메시지:**
   - 어떤 브랜치의 어떤 기능을 통합했는지 명확히 기록

---

## 요약

**dev1 기본 + dev2 일부 포함 방법:**

1. ✅ **Cherry-pick:** dev2의 특정 커밋만 선택
2. ✅ **Merge:** dev2 전체를 머지하고 충돌 해결 시 선택
3. ✅ **수동 통합:** 코드 리뷰를 통해 필요한 부분만 가져오기
4. ✅ **통합 브랜치:** 새 브랜치에서 여러 브랜치를 조합

**모든 방법이 가능하며, 상황에 맞게 선택하여 사용할 수 있습니다.**
